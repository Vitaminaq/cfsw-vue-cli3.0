function t(o){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(o)}import o,{reactive as n}from"vue";var r=function(t,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])},r(t,o)};var e=function(){return e=Object.assign||function(t){for(var o,n=1,r=arguments.length;n<r;n++)for(var e in o=arguments[n])Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e]);return t},e.apply(this,arguments)};var i,s=function(t){var o={};return Object.getOwnPropertyNames(t).forEach((function(n){o[n]=Object.getOwnPropertyDescriptor(t,n)})),o},u=function(){function t(){this.subs=[]}return t.prototype.addSub=function(t){this.subs.push(t)},t.prototype.notify=function(t){for(var o=this.subs.length,n=0;n<o;n++)this.subs[n](t)},t.prototype.removeSub=function(t){var o=this.subs.indexOf(t);this.subs.splice(o,1)},t.prototype.destroy=function(){this.subs.splice(0,this.subs.length)},t}(),c="function"==typeof Symbol&&"symbol"===t(Symbol.toStringTag),p=(i="store",c?Symbol("[vue-store-next]: "+i):"[vue-store-next]: "+i),f=new u,a=function(){function t(){var o=this,n=function(t){for(var o={},n=t.length;n--;){var r=t[n];Object.assign(o,s(r))}return o}(function(t,o){for(var n=[],r=t;r!==o;)r=Object.getPrototypeOf(r),n.push(r);return n}(this,t.prototype));Object.keys(n).forEach((function(r){var i=n[r];void 0!==i&&/^\$/.test(r)&&"function"==typeof i.value&&Object.defineProperty(o,r,e(e({},i),{value:new Proxy(o[r],{apply:function(o,n,e){return t.showLog&&function(t,o){console.log(""),console.log("path：",t),console.log("params：",o),console.log("param：",o[0]||""),console.log("")}(n.path,e),f.notify({path:n.path+"."+r,params:e,param:e[0]}),o.call.apply(o,function(){for(var t=0,o=0,n=arguments.length;o<n;o++)t+=arguments[o].length;var r=Array(t),e=0;for(o=0;o<n;o++)for(var i=arguments[o],s=0,u=i.length;s<u;s++,e++)r[e]=i[s];return r}([n],e))}})}))}))}return t.showLog=!1,t}(),y=function(t){function o(o){var n=t.call(this)||this;return n.mergeOptions(o),n}return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}(o,t),o.prototype.install=function(t){t.provide(p,this),t.config.globalProperties.$store=this},o.prototype.mergeOptions=function(t){var o=this;return t?(Object.keys(t).forEach((function(n){o[n]=t[n]})),this):this},o.prototype.getState=function(t,o){var n=this;Object.getOwnPropertyNames(o).forEach((function(r){o[r]instanceof a?n.getState(o,o[r]):t&&Object.keys(t).forEach((function(n){t[n]===o&&(o.path=t.path?t.path+"."+n:n)}))}))},o.prototype.init=function(t){return this.getState(null,this),void 0!==t&&(a.showLog=t),n(this)},o.prototype.addModule=function(t,o){return o?(this[t]=o,this.getState(this,this[t]),this):this},o.prototype.subscribe=function(t){return f.addSub(t),this},o.prototype.removeSub=function(t){return f.removeSub(t),this},o.prototype.destroySub=function(){return f.destroy(),this},o}(a),h=function(){return o.inject(p)};export{a as StoreObserve,y as default,h as useStore};
