import{g as a,p as e,i as t,o as s,c as o,j as l,t as n,q as i,w as c,r,x as d,y as _,A as m}from"./vendor.fa45f8ae.js";import{g as v,c as g}from"./index.314f5757.js";import{f as p}from"./filter.8cddc54c.js";var u=a({props:{headerTitle:{type:String,default:""},backPathName:{type:String,default:""}},computed:{hasBtn(){return!!this.$slots.btn}},methods:{back(a){return this.$router.go(-1)}}});const f=c();e("data-v-4798b4f4");const b={class:"title"},h={key:0,class:"right"},w=l("div",{class:"empty"},null,-1);t();const k=f(((a,e,t,c,r,d)=>(s(),o("div",null,[l("header",null,[l("span",{class:"back-btn",onClick:e[1]||(e[1]=(...e)=>a.back&&a.back(...e))}," back "),l("span",b,n(a.headerTitle),1),a.hasBtn?i(a.$slots,"btn",{key:1},void 0,!0):(s(),o("span",h))]),w]))));u.render=k,u.__scopeId="data-v-4798b4f4";const y=()=>window,$=!("object"!=typeof window||!y().webkit||!y().webkit.messageHandlers),D=()=>{if("object"!=typeof window)return null;const a=y();let e=null;return"object"==typeof a.cfsw?e=a.cfsw:$&&"object"==typeof a.webkit.messageHandlers.cfsw&&(e=a.webkit.messageHandlers.cfsw),e},N=!!D(),j=(a,e)=>{var t;if(((a="syncAppState")=>!!N||!!$&&!!y().webkit.messageHandlers[a])())return(t={downloadUrl:"http://www.baidu.com",onCallSuccess:a=>{console.log(a)},onCallError:a=>{console.log(a)}},(a,e)=>{const s=y();let o=-1;"string"==typeof a&&/^\d+$/.test(a)&&(o=Number(a),a="syncAppState"),s.__fm_native_count__=s.__fm_native_count__||0,s.__fm_native_count__++;const l=s.__fm_native_count__,n=`resolve_${s.__fm_native_count__}`,i=`reject_${s.__fm_native_count__}`;return new Promise(((c,r)=>{const d={params:e,code:o,resolveName:n,rejectName:i};N&&(d.fnName=a);const _=JSON.stringify(d);s.__app_native_callback__||(s.__app_native_callback__={}),s.__app_native_callback__[n]=e=>(console.log("结果================================>",e.code),t.onCallSuccess({id:l,fnName:a,response:e}),c(e)),s.__app_native_callback__[i]=e=>(console.log("错误================================>",e),t.onCallError({id:l,fnName:a,response:e}),console.log(`触发错误回调: ${e}`,l,a,d),r(e));try{return D().postMessage(_)}catch(m){console.log(m),r(m)}})).then((e=>(delete window.__app_native_callback__[n],delete window.__app_native_callback__[i],console.log(`调用原生方法：${a}`),console.log("then================================>",e),Promise.resolve(e)))).catch((e=>(delete window.__app_native_callback__[n],delete window.__app_native_callback__[i],console.log(`调用原生方法：${a} ${e.toString()}`),console.log("catch================================>",e),Promise.reject(e))))})(a,e)};var S=a({name:"blog-detail",components:{HeaderGeneral:u},computed:{id(){return Number(v(this.$route.query.id))},blogDetail(){return this.$store.blog.blogDetail},detailData(){return this.blogDetail.data},headImgUrl(){return this.detailData?`${g.baseURL}${this.detailData.headimg}`:""}},async asyncData({store:a,router:e}){if(!a.blog)return;const{blogDetail:t}=a.blog;t.$assignParams({id:e.query.id}),await t.loadData()},methods:{onOperate(a){var e;"img"===a.target.tagName.toLowerCase()&&(e=[a.target.src],j("10004",e))},formatDateToStr:a=>p(a,"yyyy-MM-dd hh:mm")}});const H=c();e("data-v-5a51f7a2");const C={class:"detail"},T={class:"detail-contain"},M={key:0,class:"blog-loading"},P=m('<div class="loading-title" data-v-5a51f7a2></div><div class="loading-author" data-v-5a51f7a2><div class="loading-headimg" data-v-5a51f7a2></div><div class="loading-name" data-v-5a51f7a2></div><div class="loading-time" data-v-5a51f7a2></div></div><div class="loading-content" data-v-5a51f7a2></div>',3),q={key:1,class:"detail-content"},A={class:"content-top"},I={class:"author"},L={class:"author-headimg"},O={class:"name"},U={class:"time"};t();const x=H(((a,e,t,i,c,m)=>{const v=r("HeaderGeneral"),g=d("rescroll");return _((s(),o("div",C,[l(v,{headerTitle:"微博正文",backPathName:"blog-home"}),l("div",T,[a.detailData?(s(),o("div",q,[l("div",A,[l("h1",null,n(a.detailData.title),1),l("div",I,[l("div",L,[l("img",{src:a.headImgUrl},null,8,["src"])]),l("div",O,n(a.detailData.nickname),1),l("div",U,n(a.formatDateToStr(Number(a.detailData.creatAt))),1)]),l("div",{class:"artic",innerHTML:a.detailData.msg,onClick:e[1]||(e[1]=(...e)=>a.onOperate&&a.onOperate(...e))},null,8,["innerHTML"])])])):(s(),o("div",M,[P]))])],512)),[[g,{name:`detail${a.$route.query.id}`,storageMode:"localstorage"}]])}));S.render=x,S.__scopeId="data-v-5a51f7a2";export default S;
